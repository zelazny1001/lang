import requests
import json
import urllib3

urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)

URL = "http://localhost:9000/rest/utility?utterance="
UTTERANCE = "test utterance here"

response = requests.get(f"{URL}{UTTERANCE}", verify=False)
response.raise_for_status()
data = response.json()

print("\nFull JSON Response:\n", json.dumps(data, indent=2))

cortex_response = data.get("cortexResponseHeader", {})
activity_log = cortex_response.get("activityLog", [])

if not activity_log:
    print("No activityLog found.")
else:
    for entry in activity_log:
        input_data = entry.get("input", {})
        intent_data = input_data.get("intent", {})
        intent_info = intent_data.get("IntentInfo", [])
        
        if intent_info:
            print("\nFound IntentInfo:\n", json.dumps(intent_info, indent=2))
        else:
            print("No IntentInfo found in this entry.")