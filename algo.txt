import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.FileOutputStream;

public class BytesToFileAppender extends DataToFileAppender<byte[]> {

    @Override
    protected String convertDataToString(byte[] data) {
        return "";
    }

    @Override
    public void appendToFile(String pathRoot, String name, String port, byte[] data, String header) {
        if (pathRoot == null) {
            pathRoot = getDefaultRoot();
        }
        String filePath = pathRoot + name + "_" + port + ".txt";
        File file = new File(filePath);
        boolean fileExists = file.exists();

        try (BufferedWriter writer = new BufferedWriter(new FileWriter(file, true))) {
            if (!fileExists && header != null) {
                writer.write(header);
                writer.newLine();
            }
        } catch (IOException e) {
            System.out.println("Error: " + e.getMessage());
        }

        try (FileOutputStream outputStream = new FileOutputStream(file, true)) {
            outputStream.write(data);
        } catch (IOException e) {
            System.out.println("Error: " + e.getMessage());
        }
    }

    public static void main(String[] args) {
        BytesToFileAppender appender = new BytesToFileAppender();
        byte[] data = {65, 66, 67, 68, 1, 2, 3, 4, 5, -20, 50};
        String pathRoot = "j:/downloads/";
        appender.appendToFile(pathRoot, "rawbytes", "57001", data, null);
    }
}