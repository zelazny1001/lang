package analyzer;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class TranscriptionWindow {
    private final String filename;
    private final int seqNum;
    private final int start;
    private final int end;
    private final String transcript;
    private final int tokens;
    private final int samples;
    private final float samplesPerToken;  // Updated to float

    public TranscriptionWindow(String filename, int seqNum, int start, int end, String transcript, int tokens, int samples, float samplesPerToken) {
        this.filename = filename;
        this.seqNum = seqNum;
        this.start = start;
        this.end = end;
        this.transcript = transcript;
        this.tokens = tokens;
        this.samples = samples;
        this.samplesPerToken = samplesPerToken;
    }

    public String getFilename() {
        return filename;
    }

    public int getSeqNum() {
        return seqNum;
    }

    public int getStart() {
        return start;
    }

    public int getEnd() {
        return end;
    }

    public String getTranscript() {
        return transcript;
    }

    public int getTokens() {
        return tokens;
    }

    public int getSamples() {
        return samples;
    }

    public float getSamplesPerToken() {
        return samplesPerToken;
    }

    public String getFFTIdentifier_old() {
        String[] sections = filename.split("_");
        if (sections.length < 2) {
            throw new IllegalArgumentException("Incorrect filename format: " + filename);
        }
        String digitsSection2 = sections[1].replaceAll("[^0-9]", "");
        return digitsSection2 + "_" + seqNum;
    }

    public String getFFTIdentifier() {
        Pattern idPattern = Pattern.compile("_(\\d+)(am.*?|pm.*?)_");
        Matcher matcher = idPattern.matcher(filename);
        if (matcher.find()) {
            String id = matcher.group(1);
            return id + "_" + seqNum;
        }
        throw new IllegalArgumentException("Incorrect filename format: " + filename);
    }

    public static void main(String[] args) {
        String t1 = "112234_99876_1234am_maxname_customerside_otherpart";
        t1 = "11111_3463am_another_with_more_data";
//        String t2 = getFFTIdentifierNew(t1, 6);
//        System.out.println(t2);
    }
}