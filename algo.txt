# Define the paths to the two directories
$dir1 = "C:\Path\To\Directory1"
$dir2 = "C:\Path\To\Directory2"

# Get the files in both directories
$files1 = Get-ChildItem -Path $dir1 -File
$files2 = Get-ChildItem -Path $dir2 -File

# Check if files are being retrieved from both directories
Write-Output "Files in $dir1:"
$files1 | ForEach-Object { Write-Output $_.Name }

Write-Output "Files in $dir2:"
$files2 | ForEach-Object { Write-Output $_.Name }

# Create a hashtable for quick lookup of files by name in Directory2
$fileSizes2 = @{}
foreach ($file in $files2) {
    $fileSizes2[$file.Name] = $file.Length
}

# Compare files by name and size
foreach ($file in $files1) {
    if ($fileSizes2.ContainsKey($file.Name)) {
        if ($file.Length -eq $fileSizes2[$file.Name]) {
            Write-Output "$($file.Name) : SAME"
        } else {
            Write-Output "$($file.Name) : DIFFERENT"
        }
    } else {
        Write-Output "$($file.Name) : Not found in $dir2"
    }
}