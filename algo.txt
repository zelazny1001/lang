import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;

import javax.servlet.http.HttpServletRequest;
import java.io.IOException;
import java.util.Arrays;
import java.util.Set;
import java.util.stream.Collectors;
import java.util.stream.StreamSupport;

public class JsonRequestHandler {

    public static boolean areKeysPresent(HttpServletRequest request, String... keysToCheck) throws IOException {
        ObjectMapper mapper = new ObjectMapper();
        JsonNode rootNode = mapper.readTree(request.getInputStream());
        Set<String> presentKeys = StreamSupport.stream(rootNode.fieldNames().spliterator(), false)
                                               .collect(Collectors.toSet());
        Set<String> requiredKeys = new HashSet<>(Arrays.asList(keysToCheck));
        return requiredKeys.stream().allMatch(presentKeys::contains);
    }
}